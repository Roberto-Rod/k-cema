/****************************************************************************/
/**
** Copyright 2020 Kirintec Ltd. All rights reserved.
**
** @file led_task.h
**
** Include file for led_task.c
**
** Project : K-CEMA
**
** Build instructions : None, include file only
**
****************************************************************************/

/* Define to prevent recursive inclusion */
#ifndef __LED_TASK_H
#define __LED_TASK_H

/*****************************************************************************
*
*  Include
*
*****************************************************************************/
#include <stdbool.h>
#include "cmsis_os.h"
#include "stm32l4xx_hal.h"

/*****************************************************************************
*
*  Global Definitions
*
*****************************************************************************/


/*****************************************************************************
*
*  Global Macros
*
*****************************************************************************/


/*****************************************************************************
*
*  Global Datatypes
*
*****************************************************************************/
typedef struct
{
	I2C_HandleTypeDef	*i2c_device;
	GPIO_TypeDef		*i2c_reset_pin_port;
	uint16_t			i2c_reset_pin;
} led_Init_t;

typedef enum
{
	led_1pps = 0,
	led_btn0,
	led_btn1,
	led_btn2,
	led_timer
} led_ChangeOn_t;

typedef enum
{
	led_all_off = 0,
	led_all,
	led_single,
	led_mix,
	led_typical
} led_Mode_t;

typedef enum led_Colours
{
	led_Off = 0,
	led_Green,
	led_Red,
	led_Yellow
} led_Colours_t;

/*****************************************************************************
*
*  Global Functions
*
*****************************************************************************/
void led_InitTask(led_Init_t init_data);
void led_Task(void const * argument);

/*****************************************************************************
*
*  External Variables
*
*****************************************************************************/

/*****************************************************************************
*
*  Local to the C file
*
*****************************************************************************/
#ifdef __LED_TASK_C

/*****************************************************************************
*
*  Local Definitions
*
*****************************************************************************/
#define LED_CHANGE_COLOUR_DELAY_MS	1000U

/*****************************************************************************
*
*  Local Datatypes
*
*****************************************************************************/


/*****************************************************************************
*
*  Local Functions
*
*****************************************************************************/


/*****************************************************************************
*
*  Local Variables
*
*****************************************************************************/
led_Init_t lg_led_init_data = {0};
bool lg_led_initialised = false;

#endif /* __LED_TASK_C */

#endif /* __LED_TASK_H */
